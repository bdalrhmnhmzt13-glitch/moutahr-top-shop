<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Top للشحن - متجر العملات والبطاقات</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', 'Arial', sans-serif;
    }
    
    body {
      background: #f8f9fa;
      color: #333;
      line-height: 1.6;
      padding: 0;
    }
    
    /* الرأس */
    .header {
      background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
      color: white;
      padding: 25px 20px;
      text-align: center;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      position: relative;
      overflow: hidden;
    }
    
    .header::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" width="100" height="100" opacity="0.1"><path fill="white" d="M30,30 L70,30 L70,70 L30,70 Z M20,20 L80,20 L80,80 L20,80 Z M10,10 L90,10 L90,90 L10,90 Z"/></svg>');
    }
    
    .store-name {
      font-size: 2.2rem;
      margin-bottom: 10px;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
      position: relative;
    }
    
    .store-tagline {
      font-size: 1.1rem;
      margin-bottom: 15px;
      opacity: 0.9;
      position: relative;
    }
    
    .price-notice {
      background: rgba(255, 255, 255, 0.2);
      padding: 12px 15px;
      border-radius: 10px;
      margin: 15px auto;
      font-size: 0.9rem;
      border: 1px dashed rgba(255, 255, 255, 0.5);
      max-width: 500px;
      position: relative;
    }
    
    .whatsapp-contact {
      background: #25D366;
      color: white;
      padding: 10px 20px;
      border-radius: 25px;
      margin: 10px auto;
      display: inline-flex;
      align-items: center;
      text-decoration: none;
      font-weight: bold;
      font-size: 0.95rem;
      transition: all 0.3s ease;
      box-shadow: 0 4px 8px rgba(37, 211, 102, 0.3);
      position: relative;
    }
    
    .whatsapp-contact:hover {
      background: #128C7E;
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(37, 211, 102, 0.4);
    }
    
    /* معلومات الدفع */
    .payment-info {
      background: #e8f4fc;
      padding: 15px;
      margin: 20px 15px;
      border-radius: 10px;
      text-align: center;
      border-right: 4px solid #25D366;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    }
    
    .payment-info h3 {
      color: #2c3e50;
      margin-bottom: 8px;
    }
    
    /* الأقسام */
    .categories {
      display: flex;
      gap: 10px;
      margin: 20px 15px;
      flex-wrap: wrap;
      justify-content: center;
    }
    
    .category-btn {
      background: #34495e;
      color: white;
      border: none;
      padding: 10px 18px;
      border-radius: 25px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 0.9rem;
      font-weight: 500;
    }
    
    .category-btn.active {
      background: #ff6b6b;
      box-shadow: 0 4px 8px rgba(255, 107, 107, 0.3);
    }
    
    .category-btn:hover {
      background: #2c3e50;
      transform: translateY(-2px);
    }
    
    /* زر سلة التسوق */
    .cart-button {
      position: fixed;
      top: 20px;
      left: 20px;
      background: #ff6b6b;
      color: white;
      border: none;
      padding: 14px;
      border-radius: 50%;
      cursor: pointer;
      font-size: 1.2rem;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
      z-index: 1000;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .cart-button:hover {
      transform: scale(1.1);
      background: #ee5a24;
    }
    
    .cart-count {
      position: absolute;
      top: -5px;
      right: -5px;
      background: #2c3e50;
      color: white;
      border-radius: 50%;
      width: 22px;
      height: 22px;
      font-size: 0.8rem;
      display: flex;
      justify-content: center;
      align-items: center;
      font-weight: bold;
    }
    
    /* سلة التسوق الجانبية */
    .cart-sidebar {
      position: fixed;
      top: 0;
      right: -350px;
      width: 320px;
      height: 100vh;
      background: white;
      box-shadow: -2px 0 15px rgba(0,0,0,0.1);
      transition: right 0.3s ease;
      z-index: 999;
      padding: 20px;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
    }
    
    .cart-sidebar.active {
      right: 0;
    }
    
    .cart-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      padding-bottom: 15px;
      border-bottom: 2px solid #f0f0f0;
    }
    
    .close-cart {
      background: none;
      border: none;
      font-size: 24px;
      cursor: pointer;
      color: #ff6b6b;
      transition: transform 0.3s ease;
    }
    
    .close-cart:hover {
      transform: scale(1.2);
    }
    
    .overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      display: none;
      z-index: 998;
    }
    
    .overlay.active {
      display: block;
    }
    
    /* المنتجات */
    .section-title {
      text-align: center;
      margin: 30px 0 25px;
      color: #2c3e50;
      font-size: 1.8rem;
      position: relative;
      padding-bottom: 10px;
    }
    
    .section-title::after {
      content: '';
      display: block;
      width: 100px;
      height: 4px;
      background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
      margin: 10px auto;
      border-radius: 2px;
    }
    
    .products {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
      gap: 20px;
      margin: 0 15px 30px;
    }
    
    .product {
      background: white;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
      text-align: center;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
      height: 240px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }
    
    .product:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 20px rgba(0,0,0,0.12);
    }
    
    .product-badge {
      position: absolute;
      top: 12px;
      left: 12px;
      background: #ff6b6b;
      color: white;
      padding: 4px 10px;
      border-radius: 15px;
      font-size: 0.75rem;
      font-weight: bold;
      z-index: 2;
    }
    
    .product-image {
      width: 70px;
      height: 70px;
      border-radius: 50%;
      margin: 0 auto 15px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: bold;
      font-size: 1.8rem;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }
    
    .product-name {
      font-size: 1rem;
      margin-bottom: 8px;
      color: #2c3e50;
      font-weight: 600;
    }
    
    .product-description {
      color: #7f8c8d;
      margin-bottom: 12px;
      line-height: 1.4;
      font-size: 0.85rem;
      height: 40px;
      overflow: hidden;
    }
    
    .product-price {
      font-size: 1.1rem;
      font-weight: bold;
      color: #2c3e50;
      margin: 10px 0;
    }
    
    .buy-now-btn {
      background: linear-gradient(135deg, #25D366 0%, #128C7E 100%);
      color: white;
      border: none;
      padding: 10px 15px;
      border-radius: 8px;
      cursor: pointer;
      width: 100%;
      transition: all 0.3s ease;
      font-weight: bold;
      font-size: 0.9rem;
      box-shadow: 0 4px 8px rgba(37, 211, 102, 0.3);
    }
    
    .buy-now-btn:hover {
      background: linear-gradient(135deg, #128C7E 0%, #075E54 100%);
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(37, 211, 102, 0.4);
    }
    
    /* عناصر السلة */
    .cart-items {
      flex-grow: 1;
      overflow-y: auto;
      margin-bottom: 20px;
    }
    
    .cart-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px 0;
      border-bottom: 1px solid #f0f0f0;
      font-size: 0.9rem;
    }
    
    .cart-item-info {
      flex-grow: 1;
    }
    
    .cart-item-name {
      font-weight: 600;
      margin-bottom: 4px;
    }
    
    .cart-item-price {
      color: #7f8c8d;
      font-size: 0.85rem;
    }
    
    .cart-item-controls {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .quantity-controls {
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .quantity-btn {
      background: #f0f0f0;
      border: none;
      width: 28px;
      height: 28px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-weight: bold;
      transition: all 0.2s ease;
    }
    
    .quantity-btn:hover {
      background: #e0e0e0;
    }
    
    .remove-btn {
      background: #ff6b6b;
      color: white;
      border: none;
      padding: 6px 10px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 0.8rem;
      transition: background 0.3s ease;
    }
    
    .remove-btn:hover {
      background: #ee5a24;
    }
    
    .cart-total {
      font-weight: bold;
      font-size: 1.2rem;
      text-align: center;
      margin: 20px 0;
      color: #2c3e50;
      padding-top: 15px;
      border-top: 2px solid #f0f0f0;
    }
    
    .checkout-btn {
      background: linear-gradient(135deg, #25D366 0%, #128C7E 100%);
      color: white;
      border: none;
      padding: 14px;
      border-radius: 8px;
      cursor: pointer;
      width: 100%;
      font-size: 1rem;
      font-weight: bold;
      transition: all 0.3s ease;
      box-shadow: 0 4px 8px rgba(37, 211, 102, 0.3);
    }
    
    .checkout-btn:hover {
      background: linear-gradient(135deg, #128C7E 0%, #075E54 100%);
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(37, 211, 102, 0.4);
    }
    
    .checkout-btn:disabled {
      background: #bdc3c7;
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }
    
    /* التذييل */
    .footer {
      background: #2c3e50;
      color: white;
      text-align: center;
      padding: 20px;
      margin-top: 30px;
    }
    
    /* التكيف مع الشاشات الصغيرة */
    @media (max-width: 768px) {
      .products {
        grid-template-columns: repeat(auto-fill, minmax(170px, 1fr));
        gap: 15px;
      }
      
      .product {
        height: 220px;
        padding: 15px;
      }
      
      .product-image {
        width: 60px;
        height: 60px;
        font-size: 1.5rem;
      }
      
      .store-name {
        font-size: 1.8rem;
      }
      
      .cart-sidebar {
        width: 300px;
      }
      
      .categories {
        justify-content: center;
      }
    }
    
    @media (max-width: 480px) {
      .products {
        grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
      }
      
      .product {
        height: 210px;
      }
      
      .cart-sidebar {
        width: 280px;
      }
      
      .header {
        padding: 20px 15px;
      }
    }
  </style>
</head>
<body>
  <!-- زر سلة التسوق -->
  <button class="cart-button" onclick="openCart()">
    🛒
    <span class="cart-count" id="cartCount">0</span>
  </button>

  <!-- الرأس -->
  <div class="header">
    <h1 class="store-name">Top للشحن</h1>
    <p class="store-tagline">أفضل العروض على العملات والبطاقات - شحن فوري</p>
    
    <div class="price-notice">
      <strong>🔄 ملاحظة هامة:</strong><br>
      الأسعار المعروضة وهمية للمعاينة فقط<br>
      <strong>اضغط على "معرفة السعر الحقيقي" لمعرفة السعر الحقيقي</strong><br>
      لدينا عروض أرخص وأفضل!
    </div>
    
    <a href="https://wa.me/963964659342" class="whatsapp-contact" target="_blank">
      📞 للتواصل: 963964659342
    </a>
  </div>

  <!-- معلومات الدفع -->
  <div class="payment-info">
    <h3>💳 طريقة الدفع</h3>
    <p>الدفع عبر سيرياتيل كاش على الرقم: <strong>963995606528</strong></p>
    <p>بعد الدفع، سيتم الشحن فوراً إلى حسابك</p>
  </div>

  <!-- الأقسام -->
  <div class="categories">
    <button class="category-btn active" onclick="filterCategory('all')">جميع المنتجات</button>
    <button class="category-btn" onclick="filterCategory('social')">التطبيقات</button>
    <button class="category-btn" onclick="filterCategory('battle')">ألعاب المعارك</button>
    <button class="category-btn" onclick="filterCategory('strategy')">ألعاب الاستراتيجية</button>
    <button class="category-btn" onclick="filterCategory('sports')">ألعاب الرياضة</button>
    <button class="category-btn" onclick="filterCategory('casual')">ألعاب Casual</button>
  </div>

  <!-- قسم المنتجات -->
  <h2 class="section-title" id="sectionTitle">🛍️ جميع المنتجات</h2>
  
  <!-- المنتجات -->
  <div class="products" id="productsContainer">
    <!-- المنتجات ستضاف هنا عن طريق JavaScript -->
  </div>

  <!-- سلة التسوق الجانبية -->
  <div class="overlay" id="overlay" onclick="closeCart()"></div>
  <div class="cart-sidebar" id="cartSidebar">
    <div class="cart-header">
      <h2>🛒 سلة التسوق</h2>
      <button class="close-cart" onclick="closeCart()">×</button>
    </div>
    
    <div class="cart-items" id="cartItems">
      <p style="text-align: center; color: #7f8c8d; padding: 20px;" id="emptyCartMessage">السلة فارغة</p>
    </div>
    
    <div class="cart-total" id="cartTotal">
      الإجمالي: 0 ل.س
    </div>
    
    <button class="checkout-btn" id="checkoutBtn" onclick="sendToWhatsApp()" disabled>📤 إرسال الطلب عبر واتساب</button>
  </div>

  <!-- التذييل -->
  <div class="footer">
    <p>Top للشحن - جميع الحقوق محفوظة &copy; 2023</p>
    <p>شحن فوري للعملات والبطاقات بأفضل الأسعار</p>
  </div>

  <script>
    // بيانات منتجات المتجر
    const products = [
      // التطبيقات الاجتماعية
      {
        id: 501,
        name: "Soul Chill",
        price: 15000,
        category: "social",
        color: "#9b59b6",
        badge: "جديد",
        description: "عملات وعناصر Soul Chill",
        icon: "🎵",
        realPrice: 12000
      },
      {
        id: 502,
        name: "Bigo Live",
        price: 12000,
        category: "social",
        color: "#e74c3c",
        badge: "شائع",
        description: "عملات وعناصر Bigo Live",
        icon: "📹",
        realPrice: 9000
      },
      {
        id: 503,
        name: "Poppo Live",
        price: 13000,
        category: "social",
        color: "#3498db",
        badge: "مميز",
        description: "عملات وعناصر Poppo Live",
        icon: "🎥",
        realPrice: 10000
      },
      {
        id: 504,
        name: "YoHo",
        price: 11000,
        category: "social",
        color: "#2ecc71",
        badge: "جديد",
        description: "عملات وعناصر YoHo",
        icon: "💬",
        realPrice: 8000
      },
      {
        id: 505,
        name: "Ahlan Chat",
        price: 10000,
        category: "social",
        color: "#f39c12",
        badge: "شائع",
        description: "عملات وعناصر Ahlan Chat",
        icon: "👋",
        realPrice: 7000
      },

      // ألعاب المعارك
      {
        id: 101,
        name: "Blood Strike",
        price: 10000,
        category: "battle",
        color: "#e74c3c",
        badge: "جديد",
        description: "عملات وعناصر Blood Strike",
        icon: "🔫",
        realPrice: 8000
      },
      {
        id: 102,
        name: "Genshin Impact", 
        price: 15000,
        category: "battle",
        color: "#3498db",
        badge: "شائع",
        description: "كريستالات Genshin Impact",
        icon: "⚔️",
        realPrice: 12000
      },
      {
        id: 103,
        name: "Delta Force",
        price: 12000,
        category: "battle",
        color: "#2ecc71",
        badge: "حصري",
        description: "عملات وعناصر Delta Force",
        icon: "🎯",
        realPrice: 9000
      },
      {
        id: 104,
        name: "Farlight 84",
        price: 13000,
        category: "battle",
        color: "#9b59b6",
        badge: "مميز",
        description: "عملات وعناصر Farlight 84",
        icon: "🔦",
        realPrice: 10000
      },

      // ألعاب الاستراتيجية
      {
        id: 201,
        name: "انتقام السلاطين",
        price: 20000,
        category: "strategy",
        color: "#d35400",
        badge: "مميز",
        description: "عملات انتقام السلاطين",
        icon: "⚔️",
        realPrice: 16000
      },
      {
        id: 202,
        name: "AVALON",
        price: 17000,
        category: "strategy",
        color: "#3498db",
        badge: "جديد",
        description: "عملات ومستلزمات AVALON",
        icon: "🏰",
        realPrice: 13000
      },
      {
        id: 203,
        name: "King of Avalon",
        price: 19000,
        category: "strategy",
        color: "#2ecc71",
        badge: "شائع",
        description: "عملات King of Avalon",
        icon: "👑",
        realPrice: 15000
      },

      // ألعاب الرياضة
      {
        id: 301,
        name: "FC Mobile",
        price: 15000,
        category: "sports",
        color: "#27ae60",
        badge: "شائع",
        description: "عملات FC Mobile",
        icon: "⚽",
        realPrice: 12000
      },
      {
        id: 302,
        name: "eFootball",
        price: 14000,
        category: "sports",
        color: "#2980b9",
        badge: "جديد",
        description: "عملات eFootball",
        icon: "🎮",
        realPrice: 11000
      },

      // ألعاب Casual
      {
        id: 401,
        name: "Ludo Club",
        price: 8000,
        category: "casual",
        color: "#f39c12",
        badge: "شائع",
        description: "عملات Ludo Club",
        icon: "🎲",
        realPrice: 6000
      },
      {
        id: 402,
        name: "Yalla Ludo",
        price: 9000,
        category: "casual",
        color: "#e74c3c",
        badge: "مميز",
        description: "عملات Yalla Ludo",
        icon: "🎯",
        realPrice: 7000
      },

      // المنتجات الأصلية (ببجي وفري فاير)
      {
        id: 601,
        name: "ببجي - 60 شدة",
        price: 10000,
        category: "battle",
        color: "#ff6b6b",
        badge: "شائع",
        description: "60 شدة للعبة ببجي",
        icon: "🎯",
        realPrice: 8000
      },
      {
        id: 602,
        name: "فري فاير - 110 جوهرة", 
        price: 12000,
        category: "battle",
        color: "#4ecdc4",
        badge: "جديد",
        description: "110 جوهرة للعبة فري فاير",
        icon: "💎",
        realPrice: 9000
      },
      {
        id: 603,
        name: "ببجي - 325 شدة",
        price: 50000,
        category: "battle",
        color: "#e74c3c",
        badge: "الأفضل",
        description: "325 شدة للعبة ببجي",
        icon: "🎯",
        realPrice: 40000
      },
      {
        id: 604,
        name: "فري فاير - 520 جوهرة",
        price: 55000,
        category: "battle",
        color: "#3498db",
        badge: "مميز",
        description: "520 جوهرة للعبة فري فاير",
        icon: "💎",
        realPrice: 45000
      }
    ];

    // متغيرات السلة
    let cart = [];
    let total = 0;
    let currentCategory = 'all';

    // عرض المنتجات
    function displayProducts() {
      const productsContainer = document.getElementById('productsContainer');
      const sectionTitle = document.getElementById('sectionTitle');
      productsContainer.innerHTML = '';

      const filteredProducts = currentCategory === 'all' 
        ? products 
        : products.filter(product => product.category === currentCategory);

      // تحديث عنوان القسم
      const categoryNames = {
        'all': 'جميع المنتجات',
        'social': 'التطبيقات الاجتماعية',
        'battle': 'ألعاب المعارك',
        'strategy': 'ألعاب الاستراتيجية',
        'sports': 'ألعاب الرياضة',
        'casual': 'ألعاب Casual'
      };
      
      sectionTitle.textContent = `🛍️ ${categoryNames[currentCategory]}`;

      if (filteredProducts.length === 0) {
        productsContainer.innerHTML = `
          <div style="grid-column: 1/-1; text-align: center; padding: 40px; color: #7f8c8d;">
            <p style="font-size: 1.2rem;">لا توجد منتجات في هذا القسم حالياً</p>
            <p style="margin-top: 10px;">يرجى التحقق من الأقسام الأخرى</p>
          </div>
        `;
        return;
      }

      filteredProducts.forEach(product => {
        const productElement = document.createElement('div');
        productElement.className = 'product';
        productElement.innerHTML = `
          ${product.badge ? `<div class="product-badge">${product.badge}</div>` : ''}
          <div class="product-image" style="background: ${product.color};">
            ${product.icon}
          </div>
          <h3 class="product-name">${product.name}</h3>
          <p class="product-description">${product.description}</p>
          <div class="product-price">${product.price.toLocaleString()} ل.س</div>
          <button class="buy-now-btn" onclick="showRealPrice(${product.id})">💰 معرفة السعر الحقيقي</button>
        `;
        productsContainer.appendChild(productElement);
      });
    }

    // إظهار السعر الحقيقي
    function showRealPrice(productId) {
      const product = products.find(p => p.id === productId);
      
      if (!product) return;

      // حساب التوفير
      const saving = product.price - product.realPrice;
      const savingPercentage = Math.round((saving / product.price) * 100);
      
      // إنشاء نافذة تأكيد مع السعر الحقيقي
      const confirmed = confirm(
        `🛒 ${product.name}\n\n` +
        `السعر الوهمي: ${product.price.toLocaleString()} ل.س\n` +
        `✅ السعر الحقيقي: ${product.realPrice.toLocaleString()} ل.س\n` +
        `💰 وفرت: ${saving.toLocaleString()} ل.س (${savingPercentage}%)\n\n` +
        `هل تريد إضافة هذا المنتج إلى السلة؟`
      );
      
      if (confirmed) {
        addToCart(productId);
      }
    }

    // تصفية حسب القسم
    function filterCategory(category) {
      currentCategory = category;
      
      // تحديد الأزرار النشطة
      document.querySelectorAll('.category-btn').forEach(btn => {
        btn.classList.remove('active');
      });
      event.target.classList.add('active');
      
      displayProducts();
    }

    // فتح سلة التسوق
    function openCart() {
      document.getElementById('cartSidebar').classList.add('active');
      document.getElementById('overlay').classList.add('active');
    }

    // إغلاق سلة التسوق
    function closeCart() {
      document.getElementById('cartSidebar').classList.remove('active');
      document.getElementById('overlay').classList.remove('active');
    }

    // إضافة منتج إلى السلة
    function addToCart(productId) {
      const product = products.find(p => p.id === productId);
      
      if (!product) return;

      // البحث إذا كان المنتج موجود مسبقاً
      const existingProduct = cart.find(item => item.id === productId);
      
      if (existingProduct) {
        existingProduct.quantity += 1;
      } else {
        cart.push({
          id: product.id,
          name: product.name,
          price: product.realPrice, // استخدام السعر الحقيقي
          quantity: 1
        });
      }
      
      // تحديث السلة
      updateCart();
      
      // فتح السلة تلقائياً
      openCart();
      
      // تأثير مرئي
      const cartBtn = document.querySelector('.cart-button');
      cartBtn.style.transform = 'scale(1.2)';
      setTimeout(() => {
        cartBtn.style.transform = 'scale(1)';
      }, 300);
    }

    // تحديث عرض السلة
    function updateCart() {
      const cartItems = document.getElementById('cartItems');
      const cartCount = document.getElementById('cartCount');
      const cartTotal = document.getElementById('cartTotal');
      const emptyCartMessage = document.getElementById('emptyCartMessage');
      const checkoutBtn = document.getElementById('checkoutBtn');
      
      // إعادة حساب الإجمالي
      total = 0;
      cart.forEach(item => {
        total += item.price * item.quantity;
      });
      
      // تحديث العداد
      const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
      cartCount.textContent = totalItems;
      
      // تحديث الإجمالي
      cartTotal.textContent = `الإجمالي: ${total.toLocaleString()} ل.س`;
      
      // تحديث حالة زر الدفع
      checkoutBtn.disabled = cart.length === 0;
      
      // تحديث قائمة العناصر
      if (cart.length === 0) {
        emptyCartMessage.style.display = 'block';
        cartItems.innerHTML = '<p style="text-align: center; color: #7f8c8d; padding: 20px;" id="emptyCartMessage">السلة فارغة</p>';
      } else {
        emptyCartMessage.style.display = 'none';
        
        let itemsHTML = '';
        cart.forEach((item, index) => {
          itemsHTML += `
            <div class="cart-item">
              <div class="cart-item-info">
                <div class="cart-item-name">${item.name}</div>
                <div class="cart-item-price">${item.price.toLocaleString()} ل.س</div>
              </div>
              <div class="cart-item-controls">
                <div class="quantity-controls">
                  <button class="quantity-btn" onclick="updateQuantity(${index}, -1)">-</button>
                  <span>${item.quantity}</span>
                  <button class="quantity-btn" onclick="updateQuantity(${index}, 1)">+</button>
                </div>
                <button class="remove-btn" onclick="removeFromCart(${index})">إزالة</button>
              </div>
            </div>
          `;
        });
        
        cartItems.innerHTML = itemsHTML;
      }
    }

    // تحديث كمية المنتج
    function updateQuantity(index, change) {
      const item = cart[index];
      item.quantity += change;
      
      if (item.quantity <= 0) {
        cart.splice(index, 1);
      }
      
      updateCart();
    }

    // إزالة منتج من السلة
    function removeFromCart(index) {
      cart.splice(index, 1);
      updateCart();
    }

    // إرسال الطلب عبر واتساب
    function sendToWhatsApp() {
      if (cart.length === 0) {
        alert('🛒 السلة فارغة! أضف بعض المنتجات أولاً.');
        return;
      }
      
      // بناء رسالة الطلب
      let message = "مرحباً، أريد شراء المنتجات التالية من Top للشحن:\n\n";
      
      cart.forEach(item => {
        message += `- ${item.name} (${item.quantity}×) = ${(item.price * item.quantity).toLocaleString()} ل.س\n`;
      });
      
      message += `\nالمجموع: ${total.toLocaleString()} ل.س\n`;
      message += "\nلقد قمت بالدفع عبر سيرياتيل كاش إلى الرقم 963995606528\n";
      message += "الرجاء التأكيد والشحن فوراً.";
      
      // ترميز الرسالة للرابط
      const encodedMessage = encodeURIComponent(message);
      
      // رقم واتساب المتجر
      const whatsappNumber = "963964659342";
      
      // إنشاء رابط واتساب
      const whatsappURL = `https://wa.me/${whatsappNumber}?text=${encodedMessage}`;
      
      // فتح واتساب في نافذة جديدة
      window.open(whatsappURL, '_blank');
      
      // تفريغ السلة بعد الإرسال
      cart = [];
      updateCart();
      closeCart();
      
      // رسالة تأكيد
      setTimeout(() => {
        alert('✅ تم إرسال طلبك بنجاح! سيتم التواصل معك قريباً.');
      }, 500);
    }

    // التهيئة الأولية
    document.addEventListener('DOMContentLoaded', function() {
      displayProducts();
      updateCart();
      console.log('🏪 متجر Top للشحن جاهز!');
    });
  </script>
</body>
</html>
